{% extends 'auth_template/base.html' %}
{% load static %}

{% block title %}Changer mot de passe{% endblock %}

{% block content %}
<body class="hold-transition theme-primary bg-img" style="background-image: url('{% static 'images/auth-bg/bg-2.jpg' %}')">
	
	<div class="container h-p100">
		<div class="row align-items-center justify-content-md-center h-p100">
			
			<div class="col-12">
				<div class="row justify-content-center g-0">
					<div class="col-lg-5 col-md-5 col-12">						
						<div class="bg-white rounded10 shadow-lg">
							<div class="content-top-agile p-20 pb-0">
								<h3 class="mb-0 text-primary">Changer mot de passe</h3>
								<p class="mb-0">Modifiez votre mot de passe</p>								
							</div>
							<div class="p-40">
								<!-- Messages d'erreur ou de succÃ¨s -->
								{% if messages %}
									{% for message in messages %}
										<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
											{{ message }}
											<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
										</div>
									{% endfor %}
								{% endif %}

								<form method="post">
									{% csrf_token %}
									
									<!-- Ancien mot de passe -->
									<div class="form-group">
										<div class="input-group mb-3">
											<span class="input-group-text bg-transparent"><i class="ti-lock"></i></span>
											{{ form.old_password }}
										</div>
										{% if form.old_password.errors %}
											<div class="text-danger">
												{% for error in form.old_password.errors %}
													<small>{{ error }}</small>
												{% endfor %}
											</div>
										{% endif %}
									</div>

									<!-- Nouveau mot de passe -->
									<div class="form-group">
										<div class="input-group mb-3">
											<span class="input-group-text bg-transparent"><i class="ti-key"></i></span>
											{{ form.new_password1 }}
										</div>
										{% if form.new_password1.errors %}
											<div class="text-danger">
												{% for error in form.new_password1.errors %}
													<small>{{ error }}</small>
												{% endfor %}
											</div>
										{% endif %}
									</div>

									<!-- Confirmer nouveau mot de passe -->
									<div class="form-group">
										<div class="input-group mb-3">
											<span class="input-group-text bg-transparent"><i class="ti-check"></i></span>
											{{ form.new_password2 }}
										</div>
										{% if form.new_password2.errors %}
											<div class="text-danger">
												{% for error in form.new_password2.errors %}
													<small>{{ error }}</small>
												{% endfor %}
											</div>
										{% endif %}
									</div>

									<div class="row">
										<div class="col-12 text-center">
											<button type="submit" class="btn btn-info margin-top-10">
												<i class="ti-save"></i> Modifier le mot de passe
											</button>
										</div>
									</div>

									<div class="row mt-3">
										<div class="col-12 text-center">
											<a href="{% if user.type_compte == 'admin' %}{% url 'Dashboard_Administrator' %}{% else %}{% url 'Dashboard_Cabinet_Administrateur' %}{% endif %}" class="btn btn-outline-secondary">
												<i class="ti-arrow-left"></i> Retour au tableau de bord
											</a>
										</div>
									</div>
								</form>	
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>	
</body>
{% endblock %}
